---
import themes from "../styles/themes.json";
---

<script define:vars={{ themes }}>
  function findThemeDefinition(item) {
    return themes.find((t) => t.name === item);
  }

  const item = window.localStorage.getItem("theme");
  const themeDefinition = findThemeDefinition(item);

  if (item && !themeDefinition) {
    window.localStorage.setItem("theme", "default");
    console.log("Theme not found, setting to default");
  }

  const theme = themeDefinition || findThemeDefinition("default");

  document.documentElement.style.setProperty(
    "--primary-color",
    theme.colors.primary
  );
  document.documentElement.style.setProperty(
    "--secondary-color",
    theme.colors.secondary
  );
  document.documentElement.style.setProperty(
    "--background-color",
    theme.colors.background
  );
  document.documentElement.style.setProperty(
    "--tertiary-color",
    theme.colors.tertiary
  );
</script>
